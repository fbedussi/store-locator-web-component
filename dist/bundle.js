!function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";(function(e,s){n.d(t,"b",function(){return h}),n.d(t,"a",function(){return p});var i,r,o,a=(i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:s,"function"==typeof(o=i.Symbol)?o.observable?r=o.observable:(r=o("observable"),o.observable=r):r="@@observable",r);const l=()=>Math.random().toString(36).substring(7).split("").join("."),c={INIT:`@@redux/INIT${l()}`,REPLACE:`@@redux/REPLACE${l()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${l()}`};function h(e,t,n){if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(h)(e,t)}if("function"!=typeof e)throw Error("Expected the reducer to be a function.");let s=e,i=t,r=[],o=r,l=!1;function p(){o===r&&(o=r.slice())}function d(){if(l)throw Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return i}function u(e){if("function"!=typeof e)throw Error("Expected the listener to be a function.");if(l)throw Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");let t=!0;return p(),o.push(e),function(){if(!t)return;if(l)throw Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,p();const n=o.indexOf(e);o.splice(n,1)}}function g(e){if(!function(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw Error("Reducers may not dispatch actions.");try{l=!0,i=s(i,e)}finally{l=!1}const t=r=o;for(let e=0;t.length>e;e++)(0,t[e])();return e}return g({type:c.INIT}),{dispatch:g,subscribe:u,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");s=e,g({type:c.REPLACE})},[a]:function(){const e=u;return{subscribe(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(d())}return n(),{unsubscribe:e(n)}},[a](){return this}}}}}function p(...e){return t=>(...n)=>{const s=t(...n);let i=()=>{throw Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")};const r={getState:s.getState,dispatch:(...e)=>i(...e)},o=e.map(e=>e(r));return i=function(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}(...o)(s.dispatch),{...s,dispatch:i}}}}).call(this,n(1),n(2)(e))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";n.r(t);var s=n(0);function i(e){return({dispatch:t,getState:n})=>s=>i=>"function"==typeof i?i(t,n,e):s(i)}const r=i();r.withExtraArgument=i;var o=r;const a=e=>({type:"UPDATE_SEARCH_TERM",searchTerm:e}),l=e=>t=>{t(f()),setTimeout(()=>t(e),50)},c=()=>({type:"RESET_SEARCH_TERM"}),h=()=>({type:"TOGGLE_FILTER_PANEL"}),p=e=>({type:"TOGGLE_STORE_TYPE",storeTypeId:e}),d=()=>({type:"RESET_FILTERS"}),u=e=>({type:"OPEN_STORE_DETAILS",store:e}),g=()=>({type:"TOGGLE_SEARCH_LAYER"}),m=e=>({type:"SET_USER_LOCATION",userLocation:e}),f=()=>({type:"SHOW_LOADING"}),y=()=>({type:"HIDE_LOADING"}),_={"store-type":{action:e=>({type:"SET_STORE_TYPES",storeTypes:e}),formatValue:e=>e[0].split(",")},search:{action:a,formatValue:e=>e[0]}},v=Object.keys(_);function w(e){let t="#";if(t+=e.search?`/search/${e.search}`:"",e.coords){const n=e.coords;t+=`/coords/${n.center.lat},${n.center.lng}/ne/${n.ne.lat},${n.ne.lng}/sw/${n.sw.lat},${n.sw.lng}`}t+=e.storeTypes&&e.storeTypes.length?`/store-types/${e.storeTypes.join(",")}`:"";const n=`${window.location.pathname}${t}`;window.history.pushState({},"",n)}function b(){const e=window.location.hash.slice(1).split("/");v.forEach(t=>{if(e.includes(t)){const n=e.slice(e.indexOf(t)+1),s=v.map(e=>n.indexOf(e)).filter(e=>e>-1).sort()[0]||n.length,i=n.slice(0,s);i.length&&P(_[t].action(_[t].formatValue(i)))}})}function x(e,t){const n=e.toLowerCase();return function(s){const i=s.location.some(e=>e.toLowerCase().includes(n)),r=s.storeTypes.some(e=>t.storeTypes.includes(e.id));return s.visible=(!e.length||i)&&(!t.storeTypes.length||r),s}}function k(e){const t=e.toLowerCase();return function(e){const n=e.location.some(e=>e.toLowerCase().includes(t));return e.visible=n,e}}function T(e){return function(t){const n=t.storeTypes.some(t=>e.storeTypes.includes(t.id));return t.visible=!e.storeTypes.length||n,t}}function C(e,t){return function(n){return n.visible=e.lat>=n.lat&&n.lat>=t.lat&&e.lng>=n.lng&&n.lng>=t.lng,n}}function S(e,t){return e.includes(t)?e.filter(e=>e!==t):e.concat(t)}var E=(e,t)=>{switch(t.type){case"LOAD_STORES":const n=t.stores.map(x(e.searchTerm,e.filters));return{...e,stores:n};case"LOAD_STORE_TYPES":return{...e,storeTypes:t.storeTypes};case"LOAD_LOCATIONS":return{...e,locations:t.locations};case"UPDATE_SEARCH_TERM":return w({...e.filters,search:t.searchTerm,coords:null}),{...e,searchTerm:t.searchTerm,stores:e.stores.map(x(t.searchTerm,e.filters))};case"RESET_SEARCH_TERM":return{...e,searchTerm:"",stores:e.stores.map(T(e.filters))};case"TOGGLE_FILTER_PANEL":return{...e,ui:{...e.ui,filterPanelOpen:!e.ui.filterPanelOpen}};case"SET_STORE_TYPES":{const n={...e.filters,storeTypes:t.storeTypes};return w(n),{...e,stores:e.stores.map(x(e.searchTerm,n)),filters:n}}case"TOGGLE_STORE_TYPE":{const n={...e.filters,storeTypes:S(e.filters.storeTypes,t.storeTypeId)};return w(n),{...e,stores:e.stores.map(x(e.searchTerm,n)),filters:n}}case"RESET_FILTERS":{const t={...e.filters,storeTypes:[]};return w(t),{...e,stores:e.stores.map(k(e.searchTerm)),filters:t}}case"OPEN_STORE_DETAILS":return{...e,openedStore:t.store};case"UPDATE_COORDS":return w({...e.filters,search:null,coords:t.coords}),{...e,stores:e.stores.map(C(t.coords.ne,t.coords.sw)),coordinates:t.coords};case"TOGGLE_SEARCH_LAYER":return{...e,ui:{...e.ui,searchLayerOpen:!e.ui.searchLayerOpen}};case"SET_USER_LOCATION":return{...e,userLocation:t.center};case"SHOW_LOADING":return{...e,ui:{...e.ui,showLoading:!0}};case"HIDE_LOADING":return{...e,ui:{...e.ui,showLoading:!1}};default:return e}},M={stores:[],numberOfVisibleStores:null,storeTypes:[],locations:[],ui:{filterPanelOpen:!1,resultPanelOpen:!0,searchLayerOpen:!1,showLoading:!1},searchTerm:"",userLocation:null,openeStore:null,filters:{search:null,coords:null,storeTypes:[]}};const L=M,I=Object(s.b)(E,L,Object(s.a)(o));const O=()=>I.getState();function $(e,t){return t.split(".").reduce((e,t)=>e&&e.hasOwnProperty(t)?e[t]:void 0,e)}const R=(e,t)=>{let n;function s(){let s=I.getState();n&&!e.some(e=>$(s,e)!==$(n,e))||(t(s,n),n=s)}e=[].concat(e);let i=I.subscribe(s);return s(),i},P=e=>I.dispatch(e);function A(e){return"0"!==e}new DOMParser;function z(e){if("true"===e)return!0;if("false"===e)return!1;const t=Number(e);if(!isNaN(t))return t;try{return JSON.parse(e)}catch(t){return e}}var B=0;function H(e,t=[]){return document._componentRegistry||(document._componentRegistry={}),Object.defineProperty(e,"observedAttributes",{get:function(){return t}}),t.forEach(t=>{Object.defineProperty(e.prototype,t,{get:function(){return z(this.getAttribute(t))},set:function(e){const n=function(e){if(!0===e)return"true";if(!1===e)return"false";if(!isNaN(e))return e.toString();try{return JSON.stringify(e)}catch(t){return e}}(e);return this.setAttribute(t,n)}})}),e.prototype.attributeChangedCallback=function(t,n,s){"function"==typeof e.prototype.propertyChangedCallback&&e.prototype.propertyChangedCallback.call(this,t,z(n),z(s))},e.prototype.setState=function(e){this.state=this.state?{...this.state,...e}:{...e},this.render(this.state)},e.prototype.registerComponent=function(){this._id=++B,document._componentRegistry[this._id]=this,this.disconnectedCallback=function(){this.unregisterComponent()}},e.prototype.unregisterComponent=function(){delete document._componentRegistry[this._id]},e.prototype.getHandlerRef=function(e,...t){return`return document._componentRegistry[${this._id}]['${e.name}'](event${t.length?", "+t.map((n=this._id,function(e){document._componentRegistry[n]._parameterRegistry.push(e);const t=document._componentRegistry[n]._parameterRegistry.length-1;return`document._componentRegistry[${n}]._parameterRegistry[${t}]`})).join(","):""})`;var n},e.prototype.resetParameterRegistry=function(){this._id&&document._componentRegistry&&(document._componentRegistry[this._id]._parameterRegistry=[])},e.prototype._render=e.prototype.render,e.prototype.render=function(...e){this.resetParameterRegistry(),"function"==typeof this._render&&this._render(...e)},e.prototype.html=function(e){var t;"function"==typeof this.componentWillUpdate&&this.componentWillUpdate(),morphdom(this,(t=e,document.createRange().createContextualFragment(t)),{childrenOnly:!0}),"function"==typeof this.componentDidUpdate&&this.componentDidUpdate()},e.prototype.renderChildComponent=function(e){const t=new(window.customElements.get(e));return t.render(),t.outerHTML},e.prototype.randomizeCssClass=function(e){return this._cssClasses||(this._cssClasses={}),this._cssClasses[e]?this._cssClasses[e]:(this._cssClasses[e]=e+"_"+function(e){for(var t="",n="abcdefghijklmnopqrstuvwxyz",s=1;s<e;s++)t+=n.charAt(Math.floor(Math.random()*n.length));return t}(6),this._cssClasses[e])},e}function N(e,t,n){return e?t?n[2]:n[2]+" "+n[1]:t?n[2]+" "+n[3]:n[0]}function j(e,t,n){var s,i,r,o=null,a=0;n||(n={});var l=function(){a=!1===n.leading?0:Date.now(),o=null,r=e.apply(s,i),o||(s=i=null)};return function(){var c=Date.now();a||!1!==n.leading||(a=c);var h=t-(c-a);return s=this,i=arguments,h<=0||h>t?(o&&(clearTimeout(o),o=null),a=c,r=e.apply(s,i),o||(s=i=null)):o||!1===n.trailing||(o=setTimeout(l,h)),r}}var D=()=>'\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="64px" height="64px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">\n    <g>\n        <polyline fill="none" stroke-width="2" stroke-linejoin="bevel" stroke-miterlimit="10" points="27,15 44,32  27,49"/>\n    </g>\n</svg>\n',Z=()=>'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="64px" height="64px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">\n    <g>\n        <rect x="16" y="1" fill="none" stroke-width="2" stroke-miterlimit="10" width="32" height="62"/>\n        <line fill="none" stroke-width="2" stroke-miterlimit="10" x1="28" y1="5" x2="36" y2="5"/>\n        <line fill="none" stroke-width="2" stroke-miterlimit="10" x1="16" y1="51" x2="48" y2="51"/>\n        <line fill="none" stroke-width="2" stroke-miterlimit="10" x1="16" y1="9" x2="48" y2="9"/>\n        <circle fill="none" stroke-width="2" stroke-linejoin="bevel" stroke-miterlimit="10" cx="32" cy="57" r="2"/>\n    </g>\n</svg>';function G(e,t){e.getMarkerClusterer().extend(G,google.maps.OverlayView),this.cluster_=e,this.className_=e.getMarkerClusterer().getClusterClass(),this.styles_=t,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(e.getMap())}function U(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinimumClusterSize(),this.averageCenter_=e.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new G(this,e.getStyles())}function F(e,t,n){this.extend(F,google.maps.OverlayView),t=t||[],n=n||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=n.gridSize||60,this.minClusterSize_=n.minimumClusterSize||2,this.maxZoom_=n.maxZoom||null,this.styles_=n.styles||[],this.title_=n.title||"",this.zoomOnClick_=!0,void 0!==n.zoomOnClick&&(this.zoomOnClick_=n.zoomOnClick),this.averageCenter_=!1,void 0!==n.averageCenter&&(this.averageCenter_=n.averageCenter),this.ignoreHidden_=!1,void 0!==n.ignoreHidden&&(this.ignoreHidden_=n.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==n.enableRetinaIcons&&(this.enableRetinaIcons_=n.enableRetinaIcons),this.imagePath_=n.imagePath||F.IMAGE_PATH,this.imageExtension_=n.imageExtension||F.IMAGE_EXTENSION,this.imageSizes_=n.imageSizes||F.IMAGE_SIZES,this.calculator_=n.calculator||F.CALCULATOR,this.batchSize_=n.batchSize||F.BATCH_SIZE,this.batchSizeIE_=n.batchSizeIE||F.BATCH_SIZE_IE,this.clusterClass_=n.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(t,!0),this.setMap(e)}window.customElements.define("stores-list",H(class extends HTMLElement{constructor(){super(),this.registerComponent()}connectedCallback(){R("stores",j(e=>{this.render(e.stores)},900))}render(e=[]){const t=this.randomizeCssClass("storeName"),n=this.randomizeCssClass("storePhone");this.innerHTML=`\n            <style>\n                stores-list ul {\n                    padding: var(--padding);\n                    height: 100%;\n                    overflow-y: scroll;\n                }\n\n                stores-list ul::-webkit-scrollbar {\n                    width: 0.3em;\n                }\n                \n                stores-list ul::-webkit-scrollbar-track {\n                    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);\n                }\n                stores-list ul li {\n                    border-bottom: solid 1px lightgray;\n                    padding: 1em 0;\n                    display: flex;\n                    justify-content: space-between;\n                }\n                stores-list ul li:first-child {\n                    border-top: solid 1px lightgray;\n                }\n                stores-list ul::-webkit-scrollbar-thumb {\n                    background-color: black;\n                    outline: 1px solid slategrey;\n                }\n                \n                stores-list ul .action {\n                    max-width: 50px;\n                    cursor: pointer;\n                }\n\n                .${t} {\n                    margin-bottom: 0.5em;\n                }\n\n                .${n} .icon {\n                    width: 1em;\n                    height: 1em;\n                    display: inline-block;\n                    verical-align: middle;\n                }\n            </style>\n            <ul>\n                ${e.filter(function(e){return e.visible}).map((e,s)=>`\n                        <li onclick="${this.getHandlerRef(this.handleStoreClick,e)}">\n                            <div>\n                                <div class="${t}">${e.name}</div>\n                                <div class="${n}">\n                                    <span class="icon">${Z()}</span>\n                                    <span class="text">${e.phone}</span>\n                                </div>\n                            </div>\n                            <div class="action">\n                                ${D()}\n                            </div>\n                        </li>`).join("")}\n            </ul>\n        `,P(y())}handleStoreClick(e,t){P(u(t))}})),G.prototype.onAdd=function(){var e,t,n=this,s=google.maps.version.split(".");s=parseInt(100*s[0],10)+parseInt(s[1],10),this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){t=e}),google.maps.event.addDomListener(this.div_,"mousedown",function(){e=!0,t=!1}),s>=332&&google.maps.event.addDomListener(this.div_,"touchstart",function(e){e.stopPropagation()}),google.maps.event.addDomListener(this.div_,"click",function(s){if(e=!1,!t){var i,r,o=n.cluster_.getMarkerClusterer();google.maps.event.trigger(o,"click",n.cluster_),google.maps.event.trigger(o,"clusterclick",n.cluster_),o.getZoomOnClick()&&(r=o.getMaxZoom(),i=n.cluster_.getBounds(),o.getMap().fitBounds(i),setTimeout(function(){o.getMap().fitBounds(i),null!==r&&o.getMap().getZoom()>r&&o.getMap().setZoom(r+1)},100)),s.cancelBubble=!0,s.stopPropagation&&s.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var e=n.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"mouseover",n.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var e=n.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"mouseout",n.cluster_)})},G.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},G.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px",this.div_.style.zIndex=google.maps.Marker.MAX_ZINDEX+1}},G.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},G.prototype.show=function(){if(this.div_){var e="",t=this.backgroundPosition_.split(" "),n=parseInt(t[0].replace(/^\s+|\s+$/g,""),10),s=parseInt(t[1].replace(/^\s+|\s+$/g,""),10),i=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(i),e="<img src='"+this.url_+"' style='position: absolute; top: "+s+"px; left: "+n+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_?e+="width: "+this.width_+"px; height: "+this.height_+"px;":e+="clip: rect("+-1*s+"px, "+(-1*n+this.width_)+"px, "+(-1*s+this.height_)+"px, "+-1*n+"px);",e+="'>",this.div_.innerHTML=e+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",void 0===this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},G.prototype.useStyle=function(e){this.sums_=e;var t=Math.max(0,e.index-1);t=Math.min(this.styles_.length-1,t);var n=this.styles_[t];this.url_=n.url,this.height_=n.height,this.width_=n.width,this.anchorText_=n.anchorText||[0,0],this.anchorIcon_=n.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=n.textColor||"black",this.textSize_=n.textSize||11,this.textDecoration_=n.textDecoration||"none",this.fontWeight_=n.fontWeight||"bold",this.fontStyle_=n.fontStyle||"normal",this.fontFamily_=n.fontFamily||"Arial,sans-serif",this.backgroundPosition_=n.backgroundPosition||"0 0"},G.prototype.setCenter=function(e){this.center_=e},G.prototype.createCss=function(e){var t=[];return t.push("cursor: pointer;"),t.push("position: absolute; top: "+e.y+"px; left: "+e.x+"px;"),t.push("width: "+this.width_+"px; height: "+this.height_+"px;"),t.push("-webkit-user-select: none;"),t.push("-khtml-user-select: none;"),t.push("-moz-user-select: none;"),t.push("-o-user-select: none;"),t.push("user-select: none;"),t.join("")},G.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t.x-=this.anchorIcon_[1],t.y-=this.anchorIcon_[0],t.x=parseInt(t.x,10),t.y=parseInt(t.y,10),t},U.prototype.getSize=function(){return this.markers_.length},U.prototype.getMarkers=function(){return this.markers_},U.prototype.getCenter=function(){return this.center_},U.prototype.getMap=function(){return this.map_},U.prototype.getMarkerClusterer=function(){return this.markerClusterer_},U.prototype.getBounds=function(){var e,t=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers();for(e=0;e<n.length;e++)t.extend(n[e].getPosition());return t},U.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},U.prototype.addMarker=function(e){var t,n,s;if(this.isMarkerAlreadyAdded_(e))return!1;if(this.center_){if(this.averageCenter_){var i=this.markers_.length+1,r=(this.center_.lat()*(i-1)+e.getPosition().lat())/i,o=(this.center_.lng()*(i-1)+e.getPosition().lng())/i;this.center_=new google.maps.LatLng(r,o),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();if(e.isAdded=!0,this.markers_.push(e),n=this.markers_.length,null!==(s=this.markerClusterer_.getMaxZoom())&&this.map_.getZoom()>s)e.getMap()!==this.map_&&e.setMap(this.map_);else if(n<this.minClusterSize_)e.getMap()!==this.map_&&e.setMap(this.map_);else if(n===this.minClusterSize_)for(t=0;t<n;t++)this.markers_[t].setMap(null);else e.setMap(null);return this.updateIcon_(),!0},U.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},U.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},U.prototype.updateIcon_=function(){var e=this.markers_.length,t=this.markerClusterer_.getMaxZoom();if(null!==t&&this.map_.getZoom()>t)this.clusterIcon_.hide();else if(e<this.minClusterSize_)this.clusterIcon_.hide();else{var n=this.markerClusterer_.getStyles().length,s=this.markerClusterer_.getCalculator()(this.markers_,n);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(s),this.clusterIcon_.show()}},U.prototype.isMarkerAlreadyAdded_=function(e){var t;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(e);for(t=0;t<this.markers_.length;t++)if(e===this.markers_[t])return!0;return!1},F.prototype.onAdd=function(){var e=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.prevZoom_=this.getMap().getZoom(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){var e=this.getMap().getZoom(),t=this.getMap().minZoom||0,n=Math.min(this.getMap().maxZoom||100,this.getMap().mapTypes[this.getMap().getMapTypeId()].maxZoom);e=Math.min(Math.max(e,t),n),this.prevZoom_!=e&&(this.prevZoom_=e,this.resetViewport_(!1))}.bind(this)),google.maps.event.addListener(this.getMap(),"idle",function(){e.redraw_()})]},F.prototype.onRemove=function(){var e;for(e=0;e<this.markers_.length;e++)this.markers_[e].getMap()!==this.activeMap_&&this.markers_[e].setMap(this.activeMap_);for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.listeners_.length;e++)google.maps.event.removeListener(this.listeners_[e]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},F.prototype.draw=function(){},F.prototype.setupStyles_=function(){var e,t;if(!(this.styles_.length>0))for(e=0;e<this.imageSizes_.length;e++)t=this.imageSizes_[e],this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},F.prototype.fitMapToMarkers=function(){var e,t=this.getMarkers(),n=new google.maps.LatLngBounds;for(e=0;e<t.length;e++)!t[e].getVisible()&&this.getIgnoreHidden()||n.extend(t[e].getPosition());this.getMap().fitBounds(n)},F.prototype.getGridSize=function(){return this.gridSize_},F.prototype.setGridSize=function(e){this.gridSize_=e},F.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},F.prototype.setMinimumClusterSize=function(e){this.minClusterSize_=e},F.prototype.getMaxZoom=function(){return this.maxZoom_},F.prototype.setMaxZoom=function(e){this.maxZoom_=e},F.prototype.getStyles=function(){return this.styles_},F.prototype.setStyles=function(e){this.styles_=e},F.prototype.getTitle=function(){return this.title_},F.prototype.setTitle=function(e){this.title_=e},F.prototype.getZoomOnClick=function(){return this.zoomOnClick_},F.prototype.setZoomOnClick=function(e){this.zoomOnClick_=e},F.prototype.getAverageCenter=function(){return this.averageCenter_},F.prototype.setAverageCenter=function(e){this.averageCenter_=e},F.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},F.prototype.setIgnoreHidden=function(e){this.ignoreHidden_=e},F.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},F.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons_=e},F.prototype.getImageExtension=function(){return this.imageExtension_},F.prototype.setImageExtension=function(e){this.imageExtension_=e},F.prototype.getImagePath=function(){return this.imagePath_},F.prototype.setImagePath=function(e){this.imagePath_=e},F.prototype.getImageSizes=function(){return this.imageSizes_},F.prototype.setImageSizes=function(e){this.imageSizes_=e},F.prototype.getCalculator=function(){return this.calculator_},F.prototype.setCalculator=function(e){this.calculator_=e},F.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},F.prototype.setBatchSizeIE=function(e){this.batchSizeIE_=e},F.prototype.getClusterClass=function(){return this.clusterClass_},F.prototype.setClusterClass=function(e){this.clusterClass_=e},F.prototype.getMarkers=function(){return this.markers_},F.prototype.getTotalMarkers=function(){return this.markers_.length},F.prototype.getClusters=function(){return this.clusters_},F.prototype.getTotalClusters=function(){return this.clusters_.length},F.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw_()},F.prototype.addMarkers=function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&this.pushMarkerTo_(e[n]);t||this.redraw_()},F.prototype.pushMarkerTo_=function(e){if(e.getDraggable()){var t=this;google.maps.event.addListener(e,"dragend",function(){t.ready_&&(this.isAdded=!1,t.repaint())})}e.isAdded=!1,this.markers_.push(e)},F.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n&&this.repaint(),n},F.prototype.removeMarkers=function(e,t){var n,s,i=!1;for(n=0;n<e.length;n++)s=this.removeMarker_(e[n]),i=i||s;return!t&&i&&this.repaint(),i},F.prototype.removeMarker_=function(e){var t,n=-1;if(this.markers_.indexOf)n=this.markers_.indexOf(e);else for(t=0;t<this.markers_.length;t++)if(e===this.markers_[t]){n=t;break}return-1!==n&&(e.setMap(null),this.markers_.splice(n,1),!0)},F.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},F.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var t;for(t=0;t<e.length;t++)e[t].remove()},0)},F.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),s=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),i=t.fromLatLngToDivPixel(n);i.x+=this.gridSize_,i.y-=this.gridSize_;var r=t.fromLatLngToDivPixel(s);r.x-=this.gridSize_,r.y+=this.gridSize_;var o=t.fromDivPixelToLatLng(i),a=t.fromDivPixelToLatLng(r);return e.extend(o),e.extend(a),e},F.prototype.redraw_=function(){this.createClusters_(0)},F.prototype.resetViewport_=function(e){var t,n;for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.markers_.length;t++)(n=this.markers_[t]).isAdded=!1,e&&n.setMap(null)},F.prototype.distanceBetweenPoints_=function(e,t){var n=(t.lat()-e.lat())*Math.PI/180,s=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},F.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},F.prototype.addToClosestCluster_=function(e){var t,n,s,i,r=4e4,o=null;for(t=0;t<this.clusters_.length;t++)(i=(s=this.clusters_[t]).getCenter())&&(n=this.distanceBetweenPoints_(i,e.getPosition()))<r&&(r=n,o=s);o&&o.isMarkerInClusterBounds(e)?o.addMarker(e):((s=new U(this)).addMarker(e),this.clusters_.push(s))},F.prototype.createClusters_=function(e){var t,n,s,i=this;if(this.ready_){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),void 0!==this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),s=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var r=this.getExtendedBounds(s),o=Math.min(e+this.batchSize_,this.markers_.length);for(t=e;t<o;t++)!(n=this.markers_[t]).isAdded&&this.isMarkerInBounds_(n,r)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n);o<this.markers_.length?this.timerRefStatic=setTimeout(function(){i.createClusters_(o)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},F.prototype.extend=function(e,t){return function(e){var t;for(t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},F.CALCULATOR=function(e,t){for(var n=0,s=e.length.toString(),i=s;0!==i;)i=parseInt(i/10,10),n++;return{text:s,index:n=Math.min(n,t),title:""}},F.BATCH_SIZE=2e3,F.BATCH_SIZE_IE=500,F.IMAGE_PATH="../images/m",F.IMAGE_EXTENSION="png",F.IMAGE_SIZES=[53,56,66,78,90];var W=F;window.customElements.define("stores-map",class extends HTMLElement{constructor(){super(),this.map=null,this.markers=[];const e=document.createElement("style");e.textContent="\n            :host {\n              position: relative;\n            }\n            .map {\n              position: relative;\n              width: 100%;\n              height: 100%;\n            }\n            .gm-bundled-control {\n                bottom: 69px!important;\n                right: 28px!important;\n            }\n            .gm-bundled-control > div > div {\n                width: 28px!important;\n                height: 55px!important;\n            }\n            .gm-bundled-control > div > div > div {\n                width: 24px!important;\n                margin: 0 3px!important;\n            }\n            .gm-bundled-control button {\n                width: 28px!important;\n                height: 27px!important;\n            }\n            .gm-bundled-control button img {\n                height: 12px!important;\n                width: 11px!important;\n                margin: 8px!important;\n            }\n        ",this.appendChild(e),this.mapElement=document.createElement("div"),this.mapElement.classList="map",this.appendChild(this.mapElement)}connectedCallback(){window.initGoogleMap=this.init.bind(this);const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRTnC96aFUTP62mNuxDBUoHcLvR35MLOI&callback=initGoogleMap",this.appendChild(e)}bindEvents(){this.map.addListener("dragend",this.dispatchUpdatedCoords.bind(this)),this.map.addListener("zoom-update",this.dispatchUpdatedCoords.bind(this))}init(){this.map=new google.maps.Map(this.mapElement,{center:{lat:48.074766,lng:7.574985},fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1,styles:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],zoom:4,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL}}),R(["stores"],j(e=>{this.stores=e.stores,this.resetMarkers(),this.setMarkers()},100)),R("userLocation",e=>{e.geolocation&&(this.map.setCenter(e.geolocation),this.dispatchUpdatedCoords())}),this.bindEvents()}setMarkers(){this.map&&(this.markers=this.stores.filter(e=>e.visible).map(e=>new google.maps.Marker({map:this.map,position:{lat:Number(e.lat),lng:Number(e.lng)},title:e.post_title})),this.markerCluster=new W(this.map,this.markers,{gridSize:40,styles:[{url:"https://media.yoox.biz/ytos/resources/BALMAIN/Images/icons/pinmap-cluster.svg",width:35,height:35}]}))}resetMarkers(){this.markerCluster&&this.markerCluster.clearMarkers(),this.markers.map(e=>{e.setMap(null)}),this.markers=[]}dispatchUpdatedCoords(){P({type:"UPDATE_COORDS",coords:{center:{lat:this.map.center.lat(),lng:this.map.center.lng()},ne:{lat:this.map.getBounds().getNorthEast().lat(),lng:this.map.getBounds().getNorthEast().lng()},sw:{lat:this.map.getBounds().getSouthWest().lat(),lng:this.map.getBounds().getSouthWest().lng()}}})}});window.customElements.define("collapsable-tab",H(class extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this.render()}render(){this.transitionDuration=this.getAttribute("transition-duration")||"400",this.displayStyle=this.getAttribute("display-style")||"block",this.shadow.innerHTML=`\n            <style>\n                .collapsableTabOuter {\n                    overflow: hidden;\n                    transition: height ${this.transitionDuration}ms;\n                    will-change: height;\n                }\n            </style>\n            <div class="collapsableTabOuter">\n                <div class="collapsableTabInner">\n                    <slot></slot>\n                </div>\n            </div>`,this.outer=this.shadow.querySelector(".collapsableTabOuter"),this.inner=this.shadow.querySelector(".collapsableTabInner")}propertyChangedCallback(e,t,n){"open"===e&&(!0===n&&this.executeOpen(),!1===n&&this.executeClose())}executeOpen(){this.inner.style.display=this.displayStyle,setTimeout(()=>{this.outer.style.height=`${this.inner.scrollHeight}px`},0)}executeClose(){setTimeout(()=>{this.outer.style.height=0},0),setTimeout(()=>{this.inner.style.display="none"},this.transitionDuration)}setContent(e){this.inner.innerHTML=e}},["open"]));window.customElements.define("search-suggestions",H(class extends HTMLElement{constructor(){super(),this.registerComponent(),this.oldSuggestions=[]}connectedCallback(){R("searchTerm",e=>{this.render(e)})}render(e={searchTerm:"",locations:[]}){const t=e.searchTerm,n=e.locations,s=t.length>2?n.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())):[],i=Boolean(s.length),r=i?s:this.oldSuggestions;this.oldSuggestions=s,this.html(`<collapsable-tab open=${i}>        \n            <ul>\n                ${r.map(e=>`<li onclick="${this.getHandlerRef(this.handleSuggestionClick,e.name)}">${e.name}</li>`).join("")}\n            </ul>  \n        </collapsable-tab>`)}handleSuggestionClick(e,t){P(a(t))}}));var V=({icon:e,label:t,clickHandler:n,cssClass:s})=>`<button class="${`iconButton${s?" "+s:""}`}" onclick="${n}">\n    <span class="icon">${e}</span>\n    <span class="visuallyHidden">${t}</span>\n</button>`,Y=()=>'<svg version="1.1" class="searchIcon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="64px" height="64px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">\n    <g>\n        <circle fill="none" stroke-width="2" stroke-miterlimit="10" cx="21" cy="21" r="20"/>\n        <line fill="none" stroke-width="2" stroke-miterlimit="10" x1="35" y1="35" x2="41" y2="41"/>\n        <rect x="46.257" y="37.065" transform="matrix(-0.7071 0.7071 -0.7071 -0.7071 121.9178 50.5)" fill="none" stroke="#000000" stroke-width="2" stroke-miterlimit="10" width="8.485" height="26.87"/>\n    </g>\n</svg>',q=()=>'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="64px" height="64px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">\n    <g>\n        <line fill="none" stroke-width="2" stroke-miterlimit="10" x1="18.947" y1="17.153" x2="45.045" y2="43.056"/>\n    </g>\n    <g>\n        <line fill="none" stroke-width="2" stroke-miterlimit="10" x1="19.045" y1="43.153" x2="44.947" y2="17.056"/>\n    </g>\n</svg>',X=()=>'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="64px" height="64px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">\n    <g>\n        <circle fill="none" stroke-width="2" stroke-miterlimit="10" cx="32" cy="22" r="6"/>\n        <path fill="none" stroke-width="2" stroke-miterlimit="10" d="M53,22.735C52.948,10.73,43.599,1,32,1s-21,9.73-21,21.735C11,38.271,31.965,63,31.965,63S53.069,38.271,53,22.735z"/>\n    </g>\n</svg>';window.customElements.define("search-box",H(class extends HTMLElement{constructor(){super(),this.registerComponent()}connectedCallback(){R(["searchTerm"],(e,t)=>{this.render(e.searchTerm)})}render(e=""){this.html(`\n        <style>\n            search-box {\n                --border-thickness: 2px;\n                margin-bottom: 1rem;\n            }\n            .searchInputAndButtons {\n                display: flex;\n            }\n            .searchInputAndIcons {\n                display: flex;\n                border: solid var(--border-thickness) black;\n                margin-right: 0.5rem;\n                flex: 1;\n            }\n            search-suggestions {\n                position: absolute;\n                left: 0;\n                width: 100%;\n                bottom: 0;\n                transform: translateY(calc(100% + 1px));\n            }\n            search-suggestions [open="true"] ul {\n                border: solid 1px lightgray;\n                box-shadow: 2px 2px 2px lightgray;\n            }\n            search-suggestions ul {\n                background-color: white;\n                padding: var(--padding);\n            }\n            .searchIcon {\n                width: var(--input-height);\n                height: var(--input-height);\n                padding: var(--padding);\n            }\n            .searchInput {\n                flex: 1;\n                position: relative;\n            }\n            .geolocalizeIcon {\n                height: calc(var(--input-height) + (var(--border-thickness) * 2));\n                width: calc(var(--input-height) + (var(--border-thickness) * 2));\n            }\n        </style>\n        <div class="searchInputAndButtons">\n            <label for="searchInput" class="visuallyHidden">Cerca un negozio</label>\n            <div class="searchInputAndIcons">\n                ${Y()}\n                <div class="searchInput">\n                    <input id="searchInput" type="text" placeholder="Inserisci una localitÃ " oninput="${`document._componentRegistry['${this._id}'].handleInput(event)`}" value="${e}"/>\n                    ${this.renderChildComponent("search-suggestions")}\n                </div>\n                ${V({icon:q(),label:"clear search",clickHandler:this.getHandlerRef(this.handleReset),cssClass:"clearSearch"})}\n            </div>\n            ${V({icon:X(),label:"geolocate me",clickHandler:this.getHandlerRef(this.handleGeoLocation),cssClass:"btn geolocalizeIcon"})}\n        </div>\n        `)}handleInput(e){P(a(e.target.value))}handleReset(){P(l(c()))}handleGeoLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){const t={lat:e.coords.latitude,lng:e.coords.longitude};P(a("")),P(m(t))},function(e){console.log("Geolocation error:",e)}):console.log("Geolocation error: missing support")}}));window.customElements.define("results-number",class extends HTMLElement{constructor(){super()}connectedCallback(){R("stores",e=>{this.render(e.stores)})}render(e=[]){const t=e.filter(e=>e.visible).length,n=["No store found, check che search query","1 store found",`${t} stores found`];this.innerHTML=`\n            <style>\n                results-number {\n                    padding: var(--padding);\n                }   \n            </style>\n            <div>${n[Math.min(2,t)]}</div>\n        `}});var J=()=>'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="64px" height="64px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">\n     <g>\n         <polyline fill="none" stroke-width="2" stroke-linejoin="bevel" stroke-miterlimit="10" points="15,24 32,41 49,24 \t"/>\n     </g>\n</svg>',K=()=>'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="64px" height="64px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">\n    <g>\n        <line fill="none" stroke-width="2" stroke-miterlimit="10" x1="18.947" y1="17.153" x2="45.045" y2="43.056"/>\n    </g>\n    <g>\n        <line fill="none" stroke-width="2" stroke-miterlimit="10" x1="19.045" y1="43.153" x2="44.947" y2="17.056"/>\n    </g>\n    <g>\n        <circle fill="none" stroke-width="2" stroke-miterlimit="10" cx="32" cy="32" r="30.999"/>\n    </g>\n</svg>';const Q="\n    width: 1rem;\n    height: 1rem;\n    margin-right: 0.5rem;\n    display: inline-block;\n    vertical-align: middle;",ee="900px";window.customElements.define("filter-panel",H(class extends HTMLElement{constructor(){super(),this.registerComponent()}connectedCallback(){R(["storeTypes","ui.filterPanelOpen","filters.storeTypes"],(e,t)=>{this.render(e,t)})}render(e=M,t=M){const n=e.storeTypes,s=e.ui.filterPanelOpen,i=t?t.ui.filterPanelOpen:void 0,r=e.filters.storeTypes,o=this.randomizeCssClass("removeIcon");this.html(`\n            <style>\n                filter-panel {\n                    padding: var(--padding);\n                }\n                .filter-panel_toggleBtn {\n                    display: inline-flex;\n                    align-items: center;\n                }\n                .filter-panel_toggleBtn_text {\n                    margin-right: 0.5rem;\n                }\n                .filter-panel_arrow svg {\n                    width: var(--input-height);\n                    height: auto;\n                    transition: transform 400ms;\n                }\n                .open .filter-panel_arrow svg {\n                    transform: rotate(180deg);\n                }\n                .storeTypeBtn .icon,\n                .${o} {\n                    ${Q}\n                }\n            </style>\n            <div class="filter-bar_header">\n                <button class="${`filter-panel_toggleBtn${s?" open":""}`}" onclick="${this.getHandlerRef(this.handleToggle)}">\n                    <span class="filter-panel_toggleBtn_text">Filter results</span>\n                    <span class="icon filter-panel_arrow">${J()}</span>\n                </button>\n                <button \n                    class="btn filter-panel_resetBtn ${N(s,i,["invisible","fade-in","visible","fade-out"])}" \n                    onclick="${this.getHandlerRef(this.handleReset)}"\n                >\n                    <span class="${o}">${K()}</span>\n                    <span class="text">reset filters</span>\n                </button>\n            </div>\n            <collapsable-tab open=${s}>\n                <ul>\n                ${n.map(e=>{const n=N(r.includes(e.id),t.filters.storeTypes.includes(e.id),["invisible","fade-in","visible","fade-out"]);return`\n                        <li>\n                            <button class="storeTypeBtn" \n                                onclick="${this.getHandlerRef(this.handleFilterClick,e)}">\n                                <span class="icon ${n}">${q()}</span>    \n                                <span class="text">${e.name}</span>\n                            </button>\n                        </li>\n                    `}).join("")}\n                </ul>\n            </collapsable-tab>`)}handleToggle(){P(h())}handleFilterClick(e,t){P(p(t.id))}handleReset(){P(l(d()))}}));var te=e=>`\n<svg class="${e}" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="64px" height="64px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">\n    <g>\n        <polyline fill="none" stroke-width="2" stroke-linejoin="bevel" stroke-miterlimit="10" points="37,15 20,32 37,49"/>\n    </g>\n</svg>\n`,ne=()=>'\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="64px" height="64px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">\n    <g>\n        <rect x="1" y="13" fill="none" stroke-width="2" stroke-miterlimit="10" width="62" height="37"/>\n        <polyline fill="none" stroke-width="2" stroke-miterlimit="10" points="1,13 32,33 63,13 \t"/>\n    </g>\n</svg>';window.customElements.define("store-details",H(class extends HTMLElement{constructor(){super(),this.registerComponent()}connectedCallback(){R("openedStore",this.render.bind(this))}render(e=M,t=M){const n=e.openedStore,s=t&&t.openedStore,i=n||s,r=this.randomizeCssClass("storeDetails"),o=this.randomizeCssClass("backButton"),a=this.randomizeCssClass("backIcon");this.html(`\n            <style>\n                .${r} {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 100%;\n                    background-color: white;\n                }\n                .${o} {\n                    background-color: black;\n                    color: white;\n                    display: flex;\n                    width: 100%;\n                    align-items: center;\n                    margin-bottom: 1rem;\n                }\n                .${a} {\n                    width: var(--input-height);\n                    height: var(--input-height); \n                    display: inline-block;\n                }\n                .${a} svg {\n                    stroke: white;\n                    width: 100%;\n                    height: 100%;\n                }\n                .${r} .store {\n                    padding: var(--padding);\n                }\n                .${r} .store_name {\n                    font-size: 1.2rem;\n                    margin-bottom: 0.5rem;\n                    font-weight: bold;\n                }\n                .${r} .store_mail,\n                .${r} .store_phone {\n                    display: flex;\n                    align-items: center;\n                }\n                .${r} .store_mail {\n                    margin-bottom: 0.25rem;\n                }\n                .${r} .store_phone {\n                    margin-bottom: 0.75rem;\n                }\n                .${r} .icon {\n                    ${Q}\n                }\n                .${r} .store_mail,\n                .${r} .store_categories {\n                    margin-bottom: 0.5rem;\n                }\n                .${r} .store_categories li {\n                    display: inline;\n                }\n                .${r} .store_categories li::after {\n                    content: ", ";\n                }\n                .${r} .store_categories li:last-child::after {\n                    content: ".";\n                }\n                .${r} .store_categoriesTitle,\n                .${r} .store_servicesTitle {\n                    font-size: 1.2rem;\n                    margin-bottom: 0.25rem;\n                }\n            </style>\n            <div class="${r} ${N(Boolean(n),Boolean(s),["hidden","slide-in-left","","slide-out-right"])}">\n                <button class="${o}" onclick="${this.getHandlerRef(this.closePanel)}">\n                    <span class="${a}">${te()}</span>\n                    <span class="text">close</span>\n                </button>\n                ${i?function(e){return`\n        <div class="store">\n            <div class="store_name">${e.name}</div>\n            <div class="store_phone">\n                <span class="icon">${Z()}</span>\n                <span class="text">${e.phone}</span>\n            </div>\n            <div class="store_mail">\n                <span class="icon">${ne()}</span>\n                <span class="text"><a href="mailto:${e.mail}">${e.mail}</a></span>\n            </div>\n            <div class="store_categoriesTitle">Store categories</div>\n            <ul class="store_categories">\n                ${e.productCategory.map(e=>`<li>${e.name}</li>`).join("")}\n            </ul>\n            <div class="store_servicesTitle">Store services</div>\n            <ul class="store_services">\n                ${e.hasMadeToMeasure?"<li>Made to measure</li>":""}\n                ${e.hasTailoring?"<li>Tailoring</li>":""}\n                ${e.gifCardAccepted?"<li>Gift card accepted</li>":""}\n                ${e.hasWiFi?"<li>Wi-Fi</li>":""}\n                ${e.reserveInStore?"<li>Reserve in store</li>":""}\n                ${e.pickUpInStore?"<li>Pick-up in store</li>":""}\n                ${e.returnInStore?"<li>Return in store</li>":""}\n                ${e.clickFromStore?"<li>Click from store</li>":""}\n                ${e.bookable?"<li>Bookable</li>":""}\n            </ul>\n        </div>\n    `}(i):""}\n            </div>\n        `)}closePanel(){P(u(null))}}));window.customElements.define("search-opener",H(class extends HTMLButtonElement{constructor(){super(),this.registerComponent()}connectedCallback(){this.render()}render(){this.innerHTML=`\n            <style>\n                .searchOpener {\n                    border: solid 1px lightgray;\n                    position: absolute;\n                    z-index: 10;\n                    background-color: white;\n                    margin: var(--padding);\n                }\n\n                @media screen and (min-width: ${ee}) {\n                    .searchOpener {\n                        display: none;\n                    }\n                }\n            </style>\n            <span class="icon">${Y()}</span>\n            <span class="text visuallyHidden">Search</span>\n        `,this.addEventListener("click",function(){P(g())})}}),{extends:"button"});window.customElements.define("left-panel",class extends HTMLElement{constructor(){super()}connectedCallback(){this.render(),R("ui.searchLayerOpen",(e,t)=>{this.className=N(e.ui.searchLayerOpen,t&&t.ui.searchLayerOpen,["hiddenLight","slide-in-left","","slide-out-right"])}),R("ui.showLoading",e=>{this.loading.classList.toggle("show",e.ui.showLoading)}),this.addEventListener("animationend",function(){const e=O();this.className=N(e.ui.searchLayerOpen,e.ui.searchLayerOpen,["hiddenLight","slide-in-left","","slide-out-right"])}),this.addEventListener("touchstart",e=>{this.touchStart=e.touches[0].clientX},{passive:!0}),this.addEventListener("touchend",e=>{this.touchStart-e.changedTouches[0].clientX>100&&P(g())},{passive:!0})}render(){this.innerHTML=`\n            <style>\n                left-panel {\n                    display: flex;\n                    flex-direction: column;\n                    margin: var(--padding);\n                    padding: var(--padding);\n                    position: absolute;\n                    z-index: 20;\n                    background-color: white;\n                    height: calc(100vh - (var(--padding) * 2));\n                    width: calc(100% - (var(--padding) * 2));\n                    box-shadow: 4px 4px 4px lightgray;\n                    will-change: transform;\n                }\n\n                .storesAndStoreDetails {\n                    position: relative;\n                    overflow: hidden;\n                    flex: 1;\n                }\n                \n                @media screen and (min-width: ${ee}) {\n                    left-panel.hiddenLight,\n                    left-panel {\n                        visibility: visible;\n                        animation: slide-in-left;\n                        width: 24rem;\n                    }\n                }\n            </style>\n            <search-box></search-box>\n            <results-number></results-number>\n            <filter-panel></filter-panel>\n            <div class="storesAndStoreDetails">\n            <stores-list></stores-list>\n            <store-details></store-details>\n            </div>\n            <div class="loading"></div>  \n        `,this.loading=this.querySelector(".loading")}}),fetch("data/stores.json").then(e=>e.json()).then(e=>{const t=function(e){return e.map(e=>({id:String(e.ID)||"",name:e.post_title||"",address:e["wpcf-store-address"]||"",geolocationAddress:e["wpcf-store-geolocation-address"]||"",lat:e["_store-lat"]||"",lng:e["_store-lng"]||"",phone:e["wpcf-store-phone"]||"",mail:e["wpcf-store-email-storelocator"]||"",mails:e["wpcf-store-email"]||"",brand:e["wpcf-store-main-store-brand"]||"",classification:e["wpcf-store-type-classification"]||"",isFlagship:A(e["wpcf-store-is-flagship"]),gifCardAccepted:A(e["wpcf-store-gift-card-accepted"]),hasWiFi:A(e["wpcf-store-has-wifi"]),hasMadeToMeasure:A(e["wpcf-store-has-made-to-measure"]),hasTailoring:A(e["wpcf-store-has-tailoring"]),bookable:A(e["wpcf-store-bookable"]),checkAvailability:A(e["wpcf-store-attr-check-availabilty"]),reserveInStore:A(e["wpcf-store-attr-reserve-in-store"]),pickUpInStore:A(e["wpcf-store-attr-pick-up-in-store"]),returnInStore:A(e["wpcf-store-attr-return-in-store"]),clickFromStore:A(e["wpcf-store-attr-click-from-store"]),gender:e.gender?e.gender.map(e=>({id:e.term_id,name:e.name})):[],storeTypes:e["store-type"]?e["store-type"].map(e=>({id:String(e.term_id),name:e.name})):[],productCategory:e["product-category"]?e["product-category"].map(e=>({id:e.id,name:e.name})):[],location:e.location?Object.keys(e.location).map(t=>e.location[t].name):[],visible:!0}))}(e);P((e=>({type:"LOAD_STORES",stores:e}))(t))}),fetch("data/store-types.json").then(e=>e.json()).then(e=>{const t=function(e){return e.terms.map(e=>({id:String(e.term_id)||"",name:e.name||""}))}(e);P((e=>({type:"LOAD_STORE_TYPES",storeTypes:e}))(t))}),fetch("data/locations.json").then(e=>e.json()).then(e=>{const t=function(e){return e.terms.map(e=>({id:String(e.term_id)||"",name:e.name||""}))}(e);P((e=>({type:"LOAD_LOCATIONS",locations:e}))(t))}),b(),document.body.addEventListener("keydown",function(e){9===e.keyCode&&document.body.classList.add("keyboardNavigation")}),document.body.addEventListener("click",function(e){document.body.classList.remove("keyboardNavigation")}),window.onpopstate=b}]);
//# sourceMappingURL=bundle.js.map